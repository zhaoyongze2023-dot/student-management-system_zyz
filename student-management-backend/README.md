# å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ - åç«¯é¡¹ç›®

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Spring Boot 3.x** çš„å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿåç«¯ï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œå®ç°äº†å®Œæ•´çš„ RBAC æƒé™æ§åˆ¶ã€è¯¾ç¨‹ç®¡ç†ã€é€‰è¯¾ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯ (Vue 3 + Element Plus)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Nginx (åå‘ä»£ç†/è´Ÿè½½å‡è¡¡)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Spring Boot åç«¯åº”ç”¨ (8080)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Controller â”‚   Service   â”‚ Repository  â”‚   Entity    â”‚      â”‚
â”‚  â”‚    å±‚       â”‚     å±‚      â”‚     å±‚      â”‚     å±‚      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Security   â”‚     JWT     â”‚   WebSocket â”‚   MinIO     â”‚      â”‚
â”‚  â”‚  æƒé™æ§åˆ¶   â”‚   è®¤è¯      â”‚   å®æ—¶é€šä¿¡   â”‚  æ–‡ä»¶å­˜å‚¨   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚              â”‚              â”‚
           â–¼              â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MySQL   â”‚   â”‚  Redis   â”‚   â”‚ RabbitMQ â”‚   â”‚  Nacos   â”‚
    â”‚  æ•°æ®åº“  â”‚   â”‚  ç¼“å­˜    â”‚   â”‚  æ¶ˆæ¯é˜Ÿåˆ— â”‚   â”‚ é…ç½®ä¸­å¿ƒ  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Java** | 17 | ç¼–ç¨‹è¯­è¨€ |
| **Spring Boot** | 3.2.x | æ ¸å¿ƒæ¡†æ¶ |
| **Spring Security** | 6.x | å®‰å…¨æ¡†æ¶ |
| **Spring Data JPA** | 3.2.x | ORMæ¡†æ¶ |
| **Spring WebSocket** | 3.2.x | å®æ—¶é€šä¿¡ |

### æ•°æ®å­˜å‚¨

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **MySQL** | 8.0 | å…³ç³»å‹æ•°æ®åº“ |
| **Redis** | 7.x | ç¼“å­˜/Sessionå­˜å‚¨ |
| **MinIO** | æœ€æ–°ç‰ˆ | å¯¹è±¡å­˜å‚¨ï¼ˆæ–‡ä»¶/å¤´åƒï¼‰ |

### å¾®æœåŠ¡ç»„ä»¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Nacos** | 2.x | æœåŠ¡æ³¨å†Œä¸é…ç½®ä¸­å¿ƒ |
| **RabbitMQ** | 3.x | æ¶ˆæ¯é˜Ÿåˆ— |

### å®‰å…¨è®¤è¯

| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| **JWT** | Tokenè®¤è¯ |
| **BCrypt** | å¯†ç åŠ å¯† |
| **Kaptcha** | å›¾å½¢éªŒè¯ç  |
| **RBAC** | åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ |

### å¼€å‘å·¥å…·

| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| **Lombok** | ç®€åŒ–ä»£ç  |
| **Maven** | ä¾èµ–ç®¡ç† |
| **Docker** | å®¹å™¨åŒ–éƒ¨ç½² |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
student-management-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/example/student/
â”‚   â”‚   â”‚   â”œâ”€â”€ StudentManagementApplication.java  # å¯åŠ¨ç±»
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ config/                            # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java            # Spring Securityé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebConfig.java                 # Webé…ç½®ï¼ˆCORSç­‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebSocketConfig.java           # WebSocketé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedisConfig.java               # Redisé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MinioConfig.java               # MinIOé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RabbitMqConfig.java            # RabbitMQé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KaptchaConfig.java             # éªŒè¯ç é…ç½®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java    # å…¨å±€å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/                        # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java            # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentController.java         # å­¦ç”Ÿç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CourseController.java          # è¯¾ç¨‹ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentCourseController.java   # é€‰è¯¾ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionController.java      # æƒé™ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UploadController.java          # æ–‡ä»¶ä¸Šä¼ æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchController.java          # æœç´¢æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageController.java         # æ¶ˆæ¯é€šçŸ¥æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DictController.java            # æ•°æ®å­—å…¸æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MenuController.java            # èœå•æ¥å£
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ WebSocketController.java       # WebSocketæ¥å£
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ service/                           # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthService.java               # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentService.java            # å­¦ç”ŸæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CourseService.java             # è¯¾ç¨‹æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentCourseService.java      # é€‰è¯¾æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionService.java         # æƒé™æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MenuService.java               # èœå•æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageService.java            # æ¶ˆæ¯æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchService.java             # æœç´¢æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DictService.java               # å­—å…¸æœåŠ¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/                        # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CourseRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentCourseRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RoleRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionRepository.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/                            # å®ä½“ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java                      # ç”¨æˆ·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Student.java                   # å­¦ç”Ÿ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Course.java                    # è¯¾ç¨‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentCourse.java             # é€‰è¯¾è®°å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Role.java                      # è§’è‰²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Permission.java                # æƒé™
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Menu.java                      # èœå•
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                               # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ApiResponse.java               # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PageResponse.java              # åˆ†é¡µå“åº”
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequest.java              # ç™»å½•è¯·æ±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterRequest.java           # æ³¨å†Œè¯·æ±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentDTO.java                # å­¦ç”ŸDTO
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CourseDTO.java                 # è¯¾ç¨‹DTO
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserDTO.java                   # ç”¨æˆ·DTO
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ security/                          # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JwtTokenProvider.java          # JWTå·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java   # JWTè¿‡æ»¤å™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomUserDetailsService.java  # ç”¨æˆ·è¯¦æƒ…æœåŠ¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/                             # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CaptchaUtil.java               # éªŒè¯ç å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileUtil.java                  # æ–‡ä»¶å·¥å…·
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ websocket/                         # WebSocket
â”‚   â”‚   â”‚       â””â”€â”€ NotificationHandler.java       # é€šçŸ¥å¤„ç†å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml                    # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ application-dev.yml                # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”‚       â”œâ”€â”€ application-prod.yml               # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â”‚       â””â”€â”€ db/                                # æ•°æ®åº“è„šæœ¬
â”‚   â”‚           â”œâ”€â”€ schema.sql                     # è¡¨ç»“æ„
â”‚   â”‚           â”œâ”€â”€ init_roles_permissions.sql     # åˆå§‹åŒ–æƒé™
â”‚   â”‚           â””â”€â”€ test_data.sql                  # æµ‹è¯•æ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ test/                                      # æµ‹è¯•ä»£ç 
â”‚
â”œâ”€â”€ docker-compose.yml                             # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile                                     # Dockeræ„å»º
â”œâ”€â”€ pom.xml                                        # Mavené…ç½®
â””â”€â”€ postman_collection.json                        # Postmanæµ‹è¯•é›†åˆ
```

---

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| è·å–éªŒè¯ç  | `GET /api/auth/captcha` | å›¾å½¢éªŒè¯ç  |
| ç”¨æˆ·ç™»å½• | `POST /api/auth/login` | JWT Tokenè®¤è¯ |
| ç”¨æˆ·æ³¨å†Œ | `POST /api/auth/register` | æ–°ç”¨æˆ·æ³¨å†Œ |
| åˆ·æ–°Token | `POST /api/auth/refresh` | åˆ·æ–°è®¿é—®ä»¤ç‰Œ |
| ç”¨æˆ·ç™»å‡º | `POST /api/auth/logout` | ç™»å‡ºç³»ç»Ÿ |
| è·å–ç”¨æˆ·ä¿¡æ¯ | `GET /api/auth/user` | å½“å‰ç”¨æˆ·ä¿¡æ¯ |

**ç‰¹æ€§**ï¼š
- âœ… JWT Token è®¤è¯
- âœ… å›¾å½¢éªŒè¯ç é˜²æŠ¤
- âœ… ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶ï¼ˆ5æ¬¡åé”å®š15åˆ†é’Ÿï¼‰
- âœ… å¯†ç BCryptåŠ å¯†å­˜å‚¨

---

### 2. å­¦ç”Ÿç®¡ç†æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | æƒé™ |
|------|------|------|
| å­¦ç”Ÿåˆ—è¡¨ | `GET /api/student/list` | ç™»å½•ç”¨æˆ· |
| å­¦ç”Ÿè¯¦æƒ… | `GET /api/student/{id}` | ç™»å½•ç”¨æˆ· |
| åˆ›å»ºå­¦ç”Ÿ | `POST /api/student` | ADMIN |
| æ›´æ–°å­¦ç”Ÿ | `PUT /api/student/{id}` | ADMIN |
| åˆ é™¤å­¦ç”Ÿ | `DELETE /api/student/{id}` | ADMIN |
| æ‰¹é‡åˆ é™¤ | `POST /api/student/batch-delete` | ADMIN |

**ç‰¹æ€§**ï¼š
- âœ… åˆ†é¡µæŸ¥è¯¢
- âœ… å…³é”®è¯æœç´¢ï¼ˆå§“å/å­¦å·ï¼‰
- âœ… æŒ‰ç­çº§/çŠ¶æ€ç­›é€‰
- âœ… å¤´åƒä¸Šä¼ 

---

### 3. è¯¾ç¨‹ç®¡ç†æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | æƒé™ |
|------|------|------|
| è¯¾ç¨‹åˆ—è¡¨ | `GET /api/course/list` | ç™»å½•ç”¨æˆ· |
| è¯¾ç¨‹è¯¦æƒ… | `GET /api/course/{id}` | ç™»å½•ç”¨æˆ· |
| åˆ›å»ºè¯¾ç¨‹ | `POST /api/course/create` | TEACHER/ADMIN |
| æ›´æ–°è¯¾ç¨‹ | `POST /api/course/{id}` | TEACHER/ADMIN |
| åˆ é™¤è¯¾ç¨‹ | `DELETE /api/course/{id}` | ADMIN |
| æ·»åŠ æ—¥ç¨‹ | `POST /api/course/{id}/schedules` | TEACHER/ADMIN |
| åˆ é™¤æ—¥ç¨‹ | `DELETE /api/course/schedules/{id}` | TEACHER/ADMIN |
| æ·»åŠ é™„ä»¶ | `POST /api/course/{id}/attachments` | TEACHER/ADMIN |

**ç‰¹æ€§**ï¼š
- âœ… è¯¾ç¨‹æ—¥ç¨‹ç®¡ç†
- âœ… è¯¾ç¨‹é™„ä»¶ç®¡ç†
- âœ… å®¹é‡æ§åˆ¶

---

### 4. é€‰è¯¾ç®¡ç†æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | æƒé™ |
|------|------|------|
| å­¦ç”Ÿé€‰è¯¾ | `POST /api/student-course/enroll` | STUDENT |
| å­¦ç”Ÿé€€è¯¾ | `DELETE /api/student-course/{id}` | STUDENT |
| å·²é€‰è¯¾ç¨‹ | `GET /api/student-course/enrolled` | STUDENT |
| å¯é€‰è¯¾ç¨‹ | `GET /api/student-course/available` | STUDENT |
| é€‰è¯¾å†å² | `GET /api/student-course/history` | STUDENT |

**ç‰¹æ€§**ï¼š
- âœ… é€‰è¯¾äººæ•°é™åˆ¶
- âœ… é‡å¤é€‰è¯¾æ£€æµ‹
- âœ… é€‰è¯¾çŠ¶æ€ç®¡ç†

---

### 5. æƒé™ç®¡ç†æ¨¡å— (RBAC)

| åŠŸèƒ½ | æ¥å£ | æƒé™ |
|------|------|------|
| æˆ‘çš„è§’è‰² | `GET /api/permission/my-roles` | ç™»å½•ç”¨æˆ· |
| æˆ‘çš„æƒé™ | `GET /api/permission/my-permissions` | ç™»å½•ç”¨æˆ· |
| èœå•åˆ—è¡¨ | `GET /api/permission/menus` | ç™»å½•ç”¨æˆ· |
| æ‰€æœ‰è§’è‰² | `GET /api/permission/roles` | ADMIN |
| æ‰€æœ‰æƒé™ | `GET /api/permission/all` | ADMIN |
| åˆ†é…è§’è‰² | `POST /api/permission/users/{userId}/roles/{roleId}` | ADMIN |
| ç§»é™¤è§’è‰² | `DELETE /api/permission/users/{userId}/roles/{roleId}` | ADMIN |

**è§’è‰²è¯´æ˜**ï¼š

| è§’è‰²ä»£ç  | è§’è‰²åç§° | æƒé™èŒƒå›´ |
|----------|----------|----------|
| `admin` | ç®¡ç†å‘˜ | æ‰€æœ‰æƒé™ |
| `teacher` | æ•™å¸ˆ | è¯¾ç¨‹ç®¡ç†ã€å­¦ç”ŸæŸ¥çœ‹ |
| `student` | å­¦ç”Ÿ | é€‰è¯¾ã€ä¸ªäººä¿¡æ¯ |

**æƒé™ä»£ç **ï¼š

| æƒé™ä»£ç  | è¯´æ˜ |
|----------|------|
| `student:view` | æŸ¥çœ‹å­¦ç”Ÿ |
| `student:edit` | ç¼–è¾‘å­¦ç”Ÿ |
| `student:delete` | åˆ é™¤å­¦ç”Ÿ |
| `course:view` | æŸ¥çœ‹è¯¾ç¨‹ |
| `course:create` | åˆ›å»ºè¯¾ç¨‹ |
| `course:edit` | ç¼–è¾‘è¯¾ç¨‹ |
| `course:delete` | åˆ é™¤è¯¾ç¨‹ |
| `enrollment:view` | æŸ¥çœ‹é€‰è¯¾ |
| `enrollment:manage` | ç®¡ç†é€‰è¯¾ |
| `grade:view` | æŸ¥çœ‹æˆç»© |
| `grade:edit` | ç¼–è¾‘æˆç»© |
| `permission:manage` | ç®¡ç†æƒé™ |
| `data:export` | å¯¼å‡ºæ•°æ® |

---

### 6. æ–‡ä»¶ä¸Šä¼ æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| ä¸Šä¼ å¤´åƒ | `POST /api/upload/avatar` | æ”¯æŒjpg/png/gifï¼Œæœ€å¤§2MB |
| ä¸Šä¼ æ–‡ä»¶ | `POST /api/upload/file` | é€šç”¨æ–‡ä»¶ä¸Šä¼  |
| å­¦ç”Ÿå¤´åƒ | `POST /api/upload/student/{id}/avatar` | æ›´æ–°å­¦ç”Ÿå¤´åƒ |

**ç‰¹æ€§**ï¼š
- âœ… æ”¯æŒæœ¬åœ°å­˜å‚¨
- âœ… æ”¯æŒMinIOå¯¹è±¡å­˜å‚¨
- âœ… æ–‡ä»¶ç±»å‹/å¤§å°éªŒè¯

---

### 7. æœç´¢æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| æœç´¢è¯¾ç¨‹ | `GET /api/search/courses` | å…³é”®è¯æœç´¢ |
| æœç´¢å­¦ç”Ÿ | `GET /api/search/students` | å…³é”®è¯æœç´¢ |
| å…¨å±€æœç´¢ | `GET /api/search/global` | åŒæ—¶æœç´¢è¯¾ç¨‹å’Œå­¦ç”Ÿ |
| çƒ­é—¨å…³é”®è¯ | `GET /api/search/popular-keywords` | çƒ­æœè¯ |

---

### 8. æ¶ˆæ¯é€šçŸ¥æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| å‘é€æ¶ˆæ¯ | `POST /api/notification/send` | ç«™å†…ä¿¡ |
| æ¶ˆæ¯åˆ—è¡¨ | `GET /api/notification/messages` | åˆ†é¡µæŸ¥è¯¢ |
| æ ‡è®°å·²è¯» | `POST /api/notification/messages/{id}/read` | æ ‡è®°å•æ¡å·²è¯» |
| æœªè¯»æ•°é‡ | `GET /api/notification/unread-count` | è·å–æœªè¯»æ¶ˆæ¯æ•° |

**ç‰¹æ€§**ï¼š
- âœ… WebSocketå®æ—¶æ¨é€
- âœ… æ¶ˆæ¯çŠ¶æ€ç®¡ç†
- âœ… RabbitMQæ¶ˆæ¯é˜Ÿåˆ—

---

### 9. æ•°æ®å­—å…¸æ¨¡å—

| åŠŸèƒ½ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| ç­çº§åˆ—è¡¨ | `GET /api/dict/classes` | ä¸‹æ‹‰é€‰æ‹© |
| çŠ¶æ€å­—å…¸ | `GET /api/dict/status` | active/inactive/graduated |
| æ€§åˆ«å­—å…¸ | `GET /api/dict/gender` | M/F |

---

## ğŸ”’ å®‰å…¨æœºåˆ¶

### JWT Token è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     1. ç™»å½•è¯·æ±‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’   â”‚   åç«¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                  2. éªŒè¯ç”¨æˆ·åå¯†ç 
                                       â”‚
                                  3. ç”ŸæˆJWT Token
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     4. è¿”å›Token     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   åç«¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
5. ä¿å­˜Tokenåˆ°localStorage
     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  6. è¯·æ±‚å¸¦Token      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’   â”‚   åç«¯   â”‚
â”‚          â”‚  Authorization:      â”‚          â”‚
â”‚          â”‚  Bearer <token>      â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                  7. éªŒè¯Token
                                       â”‚
                                  8. æå–ç”¨æˆ·ä¿¡æ¯
                                       â”‚
                                  9. æƒé™æ£€æŸ¥
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     10. è¿”å›æ•°æ®     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   åç«¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®‰å…¨ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **JWTè®¤è¯** | æ— çŠ¶æ€Tokenè®¤è¯ |
| **å¯†ç åŠ å¯†** | BCryptå“ˆå¸Œå­˜å‚¨ |
| **éªŒè¯ç ** | å›¾å½¢éªŒè¯ç é˜²æš´åŠ›ç ´è§£ |
| **ç™»å½•é”å®š** | 5æ¬¡å¤±è´¥åé”å®š15åˆ†é’Ÿ |
| **RBAC** | åŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™æ§åˆ¶ |
| **CORS** | è·¨åŸŸèµ„æºå…±äº«é…ç½® |
| **XSSé˜²æŠ¤** | è¾“å…¥è¿‡æ»¤ |

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ç”¨æˆ·è¡¨
users (id, username, password, email, phone, avatar, created_at, updated_at)

-- å­¦ç”Ÿè¡¨
students (id, student_id, name, class_id, gender, age, phone, email, 
          major, admission_year, status, avatar_url, created_at, updated_at)

-- ç­çº§è¡¨
classes (id, name, grade, student_count, created_at)

-- è¯¾ç¨‹è¡¨
courses (id, name, code, description, teacher_id, category, capacity, 
         enrolled, status, start_date, end_date, credits, location, 
         syllabus, requirements, created_at, updated_at)

-- é€‰è¯¾è®°å½•è¡¨
student_courses (id, student_id, course_id, status, grade, 
                 enroll_date, created_at, updated_at)

-- è§’è‰²è¡¨
roles (id, code, name, description, created_at)

-- æƒé™è¡¨
permissions (id, code, name, description, created_at)

-- ç”¨æˆ·è§’è‰²å…³è”è¡¨
user_roles (user_id, role_id)

-- è§’è‰²æƒé™å…³è”è¡¨
role_permissions (role_id, permission_id)

-- èœå•è¡¨
menus (id, name, path, icon, sort, parent_id, created_at)

-- æ¶ˆæ¯è¡¨
messages (id, sender_id, receiver_id, content, status, read_at, created_at)

-- è¯¾ç¨‹æ—¥ç¨‹è¡¨
course_schedules (id, course_id, day_of_week, start_time, end_time, location)

-- è¯¾ç¨‹é™„ä»¶è¡¨
course_attachments (id, course_id, file_name, file_url, file_type, file_size)
```

### ER å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  users  â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ user_roles  â”‚â”€â”€â”€â”€â”€â”€â”€â”‚  roles  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚ role_permissions â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚
                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚ permissions â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ students â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ student_courses â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ courses â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                            â”‚
      â”‚                                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ classes  â”‚                          â”‚ course_schedules   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ course_attachments â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `MYSQL_HOST` | MySQLåœ°å€ | localhost |
| `MYSQL_PORT` | MySQLç«¯å£ | 3306 |
| `MYSQL_DATABASE` | æ•°æ®åº“å | student_db |
| `MYSQL_USERNAME` | æ•°æ®åº“ç”¨æˆ· | root |
| `MYSQL_PASSWORD` | æ•°æ®åº“å¯†ç  | 123456 |
| `REDIS_HOST` | Redisåœ°å€ | localhost |
| `REDIS_PORT` | Redisç«¯å£ | 6379 |
| `JWT_SECRET` | JWTå¯†é’¥ | éšæœºç”Ÿæˆ |
| `JWT_EXPIRATION` | Tokenè¿‡æœŸæ—¶é—´ | 86400000 (24h) |

### Nacos é…ç½®

ç³»ç»Ÿæ”¯æŒä» Nacos é…ç½®ä¸­å¿ƒè¯»å–é…ç½®ï¼š

```yaml
spring:
  cloud:
    nacos:
      server-addr: localhost:8848
      config:
        enabled: true
        file-extension: yaml
```

é…ç½®æ–‡ä»¶åˆ—è¡¨ï¼š
- `database-config.yml` - æ•°æ®åº“é…ç½®
- `redis-config.yml` - Redisé…ç½®
- `jwt-config.yml` - JWTé…ç½®
- `minio-config.yml` - MinIOé…ç½®

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd student-management-backend

# 2. é…ç½®æ•°æ®åº“
# ä¿®æ”¹ application.yml ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

# 3. åˆå§‹åŒ–æ•°æ®åº“
mysql -u root -p < src/main/resources/db/schema.sql
mysql -u root -p < src/main/resources/db/init_roles_permissions.sql

# 4. å¯åŠ¨Redisï¼ˆå¯é€‰ï¼‰
redis-server

# 5. ç¼–è¯‘æ‰“åŒ…
mvn clean package -DskipTests

# 6. è¿è¡Œ
java -jar target/student-management-1.0.0.jar
```

### Docker éƒ¨ç½²

```bash
# ä½¿ç”¨ docker-compose ä¸€é”®å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®å¯åŠ¨
java -jar student-management-1.0.0.jar --spring.profiles.active=prod
```

---

## ğŸ“Š API ç»Ÿè®¡

| æ¨¡å— | æ¥å£æ•°é‡ | è¯´æ˜ |
|------|----------|------|
| è®¤è¯æ¨¡å— | 6 | ç™»å½•/æ³¨å†Œ/Tokenç®¡ç† |
| å­¦ç”Ÿç®¡ç† | 6 | CRUD + æ‰¹é‡æ“ä½œ |
| è¯¾ç¨‹ç®¡ç† | 8 | CRUD + æ—¥ç¨‹/é™„ä»¶ |
| é€‰è¯¾ç®¡ç† | 6 | é€‰è¯¾/é€€è¯¾/æŸ¥è¯¢ |
| æƒé™ç®¡ç† | 7 | RBACæƒé™æ§åˆ¶ |
| æ–‡ä»¶ä¸Šä¼  | 3 | å¤´åƒ/æ–‡ä»¶ä¸Šä¼  |
| æœç´¢æ¨¡å— | 4 | å…¨æ–‡æœç´¢ |
| æ¶ˆæ¯é€šçŸ¥ | 4 | ç«™å†…ä¿¡ |
| æ•°æ®å­—å…¸ | 3 | ä¸‹æ‹‰é€‰é¡¹ |
| **æ€»è®¡** | **47** | - |

---

## ğŸ§ª æµ‹è¯•è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | æƒé™èŒƒå›´ |
|--------|------|------|----------|
| admin | 123456 | ç®¡ç†å‘˜ | æ‰€æœ‰æƒé™ |
| teacher | 123456 | æ•™å¸ˆ | è¯¾ç¨‹ç®¡ç† |
| student | 123456 | å­¦ç”Ÿ | é€‰è¯¾åŠŸèƒ½ |

---

## ğŸ“ API æ–‡æ¡£

é¡¹ç›®æä¾› Postman æµ‹è¯•é›†åˆï¼š`postman_collection.json`

å¯¼å…¥åˆ° Postman å³å¯æµ‹è¯•æ‰€æœ‰æ¥å£ã€‚

---

## ğŸ”§ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

- éµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘è§„èŒƒ
- ä½¿ç”¨Lombokç®€åŒ–ä»£ç 
- Controlleråªåšå‚æ•°æ ¡éªŒå’Œå“åº”å°è£…
- Serviceå±‚å¤„ç†ä¸šåŠ¡é€»è¾‘
- Repositoryå±‚åªåšæ•°æ®è®¿é—®

### API è§„èŒƒ

- RESTfulé£æ ¼è®¾è®¡
- ç»Ÿä¸€å“åº”æ ¼å¼ `{code, message, data}`
- åˆ†é¡µå‚æ•°ï¼š`current`(é¡µç ) + `size`(æ¯é¡µæ¡æ•°)
- é”™è¯¯ç ï¼š200æˆåŠŸï¼Œ400å‚æ•°é”™è¯¯ï¼Œ401æœªæˆæƒï¼Œ403æƒé™ä¸è¶³ï¼Œ404ä¸å­˜åœ¨ï¼Œ500æœåŠ¡å™¨é”™è¯¯

### å®‰å…¨è§„èŒƒ

- æ‰€æœ‰æ¥å£éœ€è¦è®¤è¯ï¼ˆé™¤ç™»å½•/æ³¨å†Œ/éªŒè¯ç ï¼‰
- æ•æ„Ÿæ“ä½œéœ€è¦æƒé™æ£€æŸ¥
- å¯†ç ä¸æ˜æ–‡ä¼ è¾“å’Œå­˜å‚¨
- Tokenæœ‰æ•ˆæœŸç®¡ç†

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0.0*  
*æœ€åæ›´æ–°: 2024-12-14*
